function q(s,e,...r){if(u()&&e===void 0)throw new Error("invariant requires an error message argument");if(!s){let t;if(e===void 0)t=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;t=new Error(e.replace(/%s/g,function(){return r[n++]})),t.name="Invariant Violation"}throw t.framesToPop=1,t}}function u(){return typeof process<"u"&&!0}const i=typeof global<"u"?global:self,o=i.MutationObserver||i.WebKitMutationObserver;function a(s){return function(){const r=setTimeout(n,0),t=setInterval(n,50);function n(){clearTimeout(r),clearInterval(t),s()}}}function l(s){let e=1;const r=new o(s),t=document.createTextNode("");return r.observe(t,{characterData:!0}),function(){e=-e,t.data=e}}const c=typeof o=="function"?l:a;class d{enqueueTask(e){const{queue:r,requestFlush:t}=this;r.length||(t(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=c(this.flush),this.requestErrorThrow=a(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class f{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class g{create(e){const r=this.freeTasks,t=r.length?r.pop():new f(this.onError,n=>r[r.length]=n);return t.task=e,t}constructor(e){this.onError=e,this.freeTasks=[]}}const h=new d,p=new g(h.registerPendingError);function w(s){h.enqueueTask(p.create(s))}export{w as a,q as i};
